<h2>Tech-Radar</h2>

<section>
  <p *ngIf="!items?.length">Noch keine Items vorhanden.</p>

  <table *ngIf="items?.length" style="width:100%; border-collapse: collapse;">
    <thead>
      <tr>
        <th style="text-align:left; padding: 6px; border-bottom: 1px solid #ddd;">Titel</th>
        <th style="text-align:left; padding: 6px; border-bottom: 1px solid #ddd;">Privat</th>
        <th style="text-align:left; padding: 6px; border-bottom: 1px solid #ddd;">Status</th>
        <th style="text-align:left; padding: 6px; border-bottom: 1px solid #ddd;">Quadrant</th>
        <th style="text-align:left; padding: 6px; border-bottom: 1px solid #ddd;">Begründung</th>
        <th style="text-align:left; padding: 6px; border-bottom: 1px solid #ddd;">Beschreibung</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let it of sortedItems">
        <td style="padding: 6px; border-bottom: 1px solid #f0f0f0;">
          <strong>{{ it.title }}</strong>
        </td>
        <td style="padding: 6px; border-bottom: 1px solid #f0f0f0;">
          <span aria-label="privat">{{ it.private ? '✅' : '—' }}</span>
        </td>
        <td style="padding: 6px; border-bottom: 1px solid #f0f0f0;">
          {{ it.status }}
        </td>
        <td style="padding: 6px; border-bottom: 1px solid #f0f0f0;">
          {{ quadrantLabel[it.quadrant] }}
        </td>
        <td style="padding: 6px; border-bottom: 1px solid #f0f0f0;">
          {{ it.reason }}
        </td>
        <td style="padding: 6px; border-bottom: 1px solid #f0f0f0;">
          {{ it.description || '—' }}
        </td>
      </tr>
    </tbody>
  </table>
</section>

<hr>

<section>
  <h3>Neues Item</h3>
  <ng-container *ngIf="(isAuth$ | async); else needLogin">
    <form [formGroup]="form" (ngSubmit)="create()">
      <div>
        <label for="title">Title</label><br />
        <input id="title" type="text" formControlName="title" />
      </div>

      <div>
        <input id="private" type="checkbox" formControlName="private" />
        <label for="private">Privat</label>
      </div>

      <div>
        <label for="status">Status</label><br />
        <select id="status" formControlName="status">
          <option value="adopt">adopt</option>
          <option value="trial">trial</option>
          <option value="assess">assess</option>
          <option value="hold">hold</option>
        </select>
      </div>

      <div>
        <label for="quadrant">Quadrant</label><br />
        <select id="quadrant" formControlName="quadrant">
          <option value="languages-frameworks">languages &amp; frameworks</option>
          <option value="techniques">techniques</option>
          <option value="tools">tools</option>
          <option value="platforms">platforms</option>
        </select>
      </div>

      <div>
        <label for="reason">Begründung</label><br />
        <textarea id="reason" rows="3" formControlName="reason"
          placeholder="Warum gehört das auf den Radar?"></textarea>
      </div>

      <div>
        <label for="description">Beschreibung</label><br />
        <textarea id="description" rows="3" formControlName="description" placeholder="Zusätzliche Details"></textarea>
      </div>

      <button type="submit" [disabled]="form.invalid">Anlegen</button>
    </form>
  </ng-container>

  <ng-template #needLogin>
    <p>Bitte einloggen, um neue Items anzulegen.</p>
  </ng-template>
</section>